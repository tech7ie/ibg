import{_ as w,B as g}from"./Button-Ca0I5pBl.js";import{c as r,o as l,a as s,t as _,r as h,x as L,l as R,F as f,p as y,d as p,w as z,f as E,n as v,q as F,s as I}from"./index-NiBKQyvc.js";const P={class:"new-card-container flex-col alitems-center",style:{cursor:"pointer"}},V=["src"],q={class:"flex-col medium-padding new-content"},A={style:{"font-weight":"700"}},D={__name:"NewsCard",props:{title:String,body:String,icon:String},setup(u){const i=u;return(m,a)=>(l(),r("div",P,[s("img",{src:i.icon,class:"news-img"},null,8,V),s("div",q,[s("h4",A,_(i.title),1),s("h3",null,_(i.body.slice(0,100))+"...",1),a[0]||(a[0]=s("a",{style:{color:"rgba(98, 136, 194, 1)","margin-left":"auto","margin-top":"auto"}},"Читать дальше",-1))])]))}},J=w(D,[["__scopeId","data-v-422391b9"]]),M={id:"news",class:"flex-row justy-center alitems-center top-bottom-large-padding"},O={class:"flex-col alitems-center container-width large-gap"},T={class:"flex-col medium-gap"},G={key:0},H={key:1,class:"flex-row align-center justy-center",style:{gap:"50%"}},K={__name:"NewsSection",props:{cropped:{type:Boolean,default:!0}},setup(u){const i=u,m=F(),a=h([]),n=h(0),k=()=>{a.value.length<(n.value+1)*12||n.value++},x=()=>{n.value!=0&&n.value--};function b(e){m.push(`/new/${e}`)}function N(e){return e.sort((o,t)=>o.id-t.id)}const C=async()=>{try{const e=await fetch("https://zayac.tech/ibgapi/news");if(!e.ok)throw new Error("Network response was not ok");const o=N(await e.json());localStorage.setItem("news",JSON.stringify(o)),a.value=o.map(t=>({id:t.id,title:t.title,body:t.text,created_at:t.created_at,images:t.images||[]}))}catch(e){console.error("There was a problem with the fetch operation:",e)}},B=(e,o)=>{i.cropped?e=e.slice(-6):e=e.slice(n.value*12,(n.value+1)*12);const t=[];for(let c=0;c<e.length;c+=o)t.push(e.slice(c,c+o));return t},S=L(()=>B(a.value,3)),$=e=>e.length>0?`https://zayac.tech${e[0].url}`:"";return R(()=>{C()}),(e,o)=>{const t=E("RouterLink");return l(),r("div",M,[s("div",O,[o[0]||(o[0]=s("div",{class:"flex-col",style:{gap:"12px","margin-right":"auto"}},[s("h1",{class:"text-align-mobile"},"Новости")],-1)),s("div",T,[(l(!0),r(f,null,y(S.value,(c,j)=>(l(),r("div",{key:j,class:"mobile-wrap-column medium-gap",style:{"word-wrap":"break-word"}},[(l(!0),r(f,null,y(c,d=>(l(),I(J,{key:d.id,title:d.title,body:d.body,icon:$(d.images),style:{flex:"1"},onClick:Q=>b(d.id)},null,8,["title","body","icon","onClick"]))),128))]))),128))]),u.cropped?(l(),r("div",G,[p(t,{to:"/news"},{default:z(()=>[p(g,{title:"Все статьи"})]),_:1})])):(l(),r("div",H,[p(g,{title:"Назад",onClick:x,style:v([n.value==0?{backgroundColor:"grey"}:{},{"margin-right":"auto"}])},null,8,["style"]),p(g,{title:"Вперед",onClick:k,style:v([a.value.length<(n.value+1)*12?{backgroundColor:"grey"}:{},{"margin-left":"auto"}])},null,8,["style"])]))])])}}},X=w(K,[["__scopeId","data-v-7ef89bdf"]]);export{X as N};
