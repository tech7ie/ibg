import{_ as w,B as g}from"./Button-D4FR88is.js";import{c as a,o as l,a as s,t as _,r as h,x as L,l as R,F as f,p as y,d as p,w as E,f as F,n as v,q as I,s as P}from"./index-DPHdfVR8.js";const V={class:"new-card-container flex-col alitems-center",style:{cursor:"pointer"}},q=["src"],A={class:"flex-col medium-padding new-content"},D={style:{"font-weight":"700"}},J={__name:"NewsCard",props:{title:String,body:String,icon:String},setup(u){const i=u;return(m,r)=>(l(),a("div",V,[s("img",{src:i.icon,class:"news-img"},null,8,q),s("div",A,[s("h4",D,_(i.title),1),s("h3",null,_(i.body.slice(0,100))+"...",1),r[0]||(r[0]=s("a",{style:{color:"rgba(98, 136, 194, 1)","margin-left":"auto","margin-top":"auto"}},"Читать дальше",-1))])]))}},M=w(J,[["__scopeId","data-v-422391b9"]]),O={id:"news",class:"flex-row justy-center alitems-center top-bottom-large-padding"},T={class:"flex-col alitems-center container-width large-gap"},z={class:"flex-col medium-gap"},G={key:0},H={key:1,class:"flex-row align-center justy-center",style:{gap:"50%"}},K={__name:"NewsSection",props:{cropped:{type:Boolean,default:!0}},setup(u){const i=u,m=I(),r=h([]),n=h(0),k=()=>{r.value.length<(n.value+1)*12||n.value++},x=()=>{n.value!=0&&n.value--};function b(e){m.push(`/new/${e}`)}function N(e){return e.sort((o,t)=>o.id-t.id)}const C=async()=>{try{const e=await fetch("http://localhost:8000/api/news");if(!e.ok)throw new Error("Network response was not ok");const o=N(await e.json());localStorage.setItem("news",JSON.stringify(o)),r.value=o.map(t=>({id:t.id,title:t.title,body:t.text,created_at:t.created_at,images:t.images||[]}))}catch(e){console.error("There was a problem with the fetch operation:",e)}},B=(e,o)=>{i.cropped?e=e.slice(-6):e=e.slice(n.value*12,(n.value+1)*12);const t=[];for(let c=0;c<e.length;c+=o)t.push(e.slice(c,c+o));return t},S=L(()=>B(r.value,3)),$=e=>e.length>0?`http://localhost:8000${e[0].url}`:"";return R(()=>{C()}),(e,o)=>{const t=F("RouterLink");return l(),a("div",O,[s("div",T,[o[0]||(o[0]=s("div",{class:"flex-col",style:{gap:"12px","margin-right":"auto"}},[s("h1",{class:"text-align-mobile"},"Новости")],-1)),s("div",z,[(l(!0),a(f,null,y(S.value,(c,j)=>(l(),a("div",{key:j,class:"mobile-wrap-column medium-gap",style:{"word-wrap":"break-word"}},[(l(!0),a(f,null,y(c,d=>(l(),P(M,{key:d.id,title:d.title,body:d.body,icon:$(d.images),style:{flex:"1"},onClick:Q=>b(d.id)},null,8,["title","body","icon","onClick"]))),128))]))),128))]),u.cropped?(l(),a("div",G,[p(t,{to:"/news"},{default:E(()=>[p(g,{title:"Все статьи"})]),_:1})])):(l(),a("div",H,[p(g,{title:"Назад",onClick:x,style:v([n.value==0?{backgroundColor:"grey"}:{},{"margin-right":"auto"}])},null,8,["style"]),p(g,{title:"Вперед",onClick:k,style:v([r.value.length<(n.value+1)*12?{backgroundColor:"grey"}:{},{"margin-left":"auto"}])},null,8,["style"])]))])])}}},X=w(K,[["__scopeId","data-v-231f4d34"]]);export{X as N};
